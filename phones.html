<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tech Hub - Phones</title>
    <style>
        body { font-family: sans-serif; margin: 0; padding: 20px; max-width: 900px; margin: 20px auto; }
        nav { margin-bottom: 20px; border-bottom: 1px solid #eee; padding-bottom: 10px; }
        nav a { margin-right: 15px; text-decoration: none; color: #007bff; font-weight: bold; }
        h1 { color: #333; }
        .product { border: 1px solid #ccc; padding: 15px; margin-bottom: 15px; border-radius: 5px; overflow: hidden; }
        .product h2 a { color: #007bff; text-decoration: none; }
        .product-img { max-width: 100px; height: auto; float: left; margin-right: 15px; border-radius: 5px; }
    </style>

    <script>
    window.dataLayer = window.dataLayer || [];
    dataLayer.push({
        'pageType': 'list_view',
        'pageCategory': 'Phones',
        'productList': [
            { 'id': 'e1', 'sku': 'PHN001', 'name': 'Vertex X1 Phone', 'price': 999.00, 'category': 'Phones' },
            { 'id': 'e2', 'sku': 'PHN002', 'name': 'Alpha 7 Mini Phone', 'price': 699.00, 'category': 'Phones' }
        ]
    });
    </script>
    
    <script type="text/javascript">
    /* MEDIARITHMICS SDK LOADER - DO NOT EDIT THIS PART */
    !function(t,e,a){"use strict";var i=t.scimhtiraidem||{};function s(t){var e=i[a]||{};i[a]=e,e[t]||(e[t]=function(){i._queue[a].push({method:t,args:Array.prototype.slice.apply(arguments)})})}t.googletag=t.googletag||{},t.googletag.cmd=t.googletag.cmd||[],t.googletag.cmd.push(function(){var e=t.localStorage.getItem("mics_sgmts"),a=JSON.parse(e),i=a||{};Object.keys(i).forEach(function(e){t.googletag.pubads().setTargeting("mics_"+e,i[e].map(String))})});var r="init call config push pushDefault addIdentifier addProperties addProperty onFinish onStart _reset".split(" ");i._queue=i._queue||{},i._names=i._names||[],i._names.push(a),i._queue[a]=i._queue[a]||[],i._startTime=(new Date).getTime(),i._snippetVersion="2.0";for(var o=0;o<r.length;o++)s(r[o]);t.scimhtiraidem=i,t[a]=i[a];var n=e.createElement("script");n.setAttribute("type","text/javascript"),n.setAttribute("src","https://static.mediarithmics.com/tag/2/tag.min.js"),n.setAttribute("async","true"),e.getElementsByTagName("script")[0].parentNode.appendChild(n)}(window,document,"mics");
    
    // --------------------------------------------------------------------------
    // 1. Queue Initialization and Configuration Commands

    // Initialize the SDK with the Site Token
    mics.push("init", "demo-media-retail-site"); 

    // Explicitly add the user agent identifier (triggers cookie/vector logic)
    mics.push("addIdentifier", "user_agent_id"); 

    // Enable client-side feeds (Standard practice)
    mics.push("call", "syncFeeds");
    
    // --------------------------------------------------------------------------
    // 2. Prepare Event Payload

    var eventProperties = {};
    var eventType = 'Page View';
    
    eventProperties.page_url = 'demo-media-retail-site.netlify.app' + window.location.pathname;
    eventProperties.page_name = document.title;
    
    // Read the page-specific dataLayer content
    if (window.dataLayer && window.dataLayer.length > 0) {
        var dlData = window.dataLayer[window.dataLayer.length - 1]; 
        
        if (dlData.pageType === 'product_view' && dlData.productDetail) {
            eventType = 'Product View';
            eventProperties.product_id = dlData.productDetail.id;
            eventProperties.product_sku = dlData.productDetail.sku;
            eventProperties.product_name = dlData.productDetail.name;
            eventProperties.product_price = dlData.productDetail.price;
            eventProperties.product_category = dlData.productDetail.category;
            
        } else if (dlData.pageType === 'list_view') {
            eventType = 'Product List View';
            eventProperties.category_name = dlData.pageCategory;
            eventProperties.product_list = dlData.productList; 
            
        } else {
            eventProperties.page_type = dlData.pageType; 
        }
    }
    
    // 3. Queue the Custom Event (This runs LAST, after all initialization commands)
    mics.push(eventType, eventProperties);
</script>

</head>
<body>
    <nav>
        <a href="index.html">Home</a>
        <a href="phones.html">Phones</a>
        <a href="laptops.html">Laptops</a>
    </nav>
    <h1>Smartphones ðŸ“±</h1>
    <p>This page fires a **'Product List View'** event containing the two phones listed below.</p>
    
    <div class="product">
        <img src="vertexx1.png" alt="Vertex X1 Phone" class="product-img">
        <h2><a href="product-vertexx1.html">Vertex X1 Phone</a></h2>
        <p>Price: $999.00 | SKU: PHN001</p>
        <p>Flagship performance with a stunning OLED display.</p>
    </div>

    <div class="product">
        <img src="alpha7mini.png" alt="Alpha 7 Mini Phone" class="product-img">
        <h2><a href="product-alpha7mini.html">Alpha 7 Mini Phone</a></h2>
        <p>Price: $699.00 | SKU: PHN002</p>
        <p>Compact power and long battery life.</p>
    </div>
</body>
</html>